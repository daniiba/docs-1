---
sidebarTitle: 'Quick Start'
title: 'Quick Start'
icon: rocket
---

Here you will learn how to install the npm package and how to use it in your extension project.

# Requirements
Before you start, make sure that:

1) Your Chrome Extension is using [Manifest V3](https://developer.chrome.com/docs/extensions/develop/migrate/what-is-mv3)
2) Your code is organized in a compiled way, by using Webpack, Rollup, or other bundlers.
If you don't have a bundler set up, first follow the guide [here](https://docs.mellowtel.it/guides/static-to-webpack)

# Install npm package

To install the npm package, you can run the following command in your terminal:

```npm
npm install mellowtel
```

If you are using yarn as your package manager, you can run the following command:

```yarn
yarn add mellowtel
```

# Decide how to implement the Mellowtel library
There are two ways you can implement the Mellowtel library in your extension.

If you are going to release the extension for the first time on the Chrome Web Store follow Option 1.
If you already had the extension published on the Web Store read "How to decide?"

### How to decide?

When you install your extension from the Web Store, does an alert window pop up asking for permission to "Read and change all your data on all websites"?

It looks like this:

<Frame caption="Alert window asking for permission to Read and change all your data on all websites">
    <img src="/images/alert_web_store.png" />
</Frame>

If it does, you can follow Option 1. If it doesn't, you need to follow Option 2.


# Option 1
If you are releasing the extension for the first time on the Web Store or you are importing the library in an extension that asks for permission to operate on all websites, you can follow Option 1.

### Set up your manifest
In your [manifest.json](https://developer.chrome.com/docs/extensions/reference/manifest) file modify the `permissions` and `host_permissions` sections like this:

```json

  "permissions": [
    "storage",
    "tabs",
    "declarativeNetRequest"
  ],
  "host_permissions": [
    "\u003Call_urls\u003E"
  ],

```

### Set up your service worker (background script)

In your [service worker](https://developer.chrome.com/docs/extensions/develop/concepts/service-workers) file, you need to import the `mellowtel` package.

Note: The service worker was also known as `background script`.

You can copy and paste the following code into your service worker file by changing the `configuration_key` with your own key.

```javascript
import Mellowtel from "mellowtel";
let mellowtel;
(async () => {
mellowtel = new Mellowtel("<configuration_key>");
await mellowtel.initBackground();
})();
```

Here's a breakdown of the code above:
<Accordion title="Service worker code breakdown">
Import the mellowtel package
```javascript
import Mellowtel from "mellowtel";
```

You can then use `Mellowtel(configuration_key, options?)` to create a new instance of the Mellowtel object. The Mellowtel object is your entrypoint to the rest of Mellowtel's SDK. Your `configuration_key` is required when calling this function, as it identifies your extension to Mellowtel. You can find your `configuration_key` in the [dashboard](https://www.mellowtel.it/mellowtel-dashboard/#home)
```javascript
mellowtel = new Mellowtel("<configuration_key>");
```

Initialize Mellowtel by calling the `initBackground` method. This method will initialize the Mellowtel object and set up the necessary listeners.
```javascript
await mellowtel.initBackground();
```
</Accordion>


### Set up your content script
You have to import the mellowtel package in [content scripts](https://developer.chrome.com/docs/extensions/develop/concepts/content-scripts) as well.

This content script should run in `all_frames` and `<all_urls>` at the `document_start`.

We suggest creating a new content script (e.g. content_start_mellowtel.js) where you can copy and paste the following code.
Change the `configuration_key` with your own key.

    ```javascript
    import Mellowtel from "mellowtel";
    let mellowtel;
    (async () => {
    mellowtel = new Mellowtel("<configuration_key>");
    await mellowtel.initContentScript();
    })();
    ```

Remember then to add also this content script in your `manifest.json` file in the content_scripts section.
Change the `name_of_your_content_script.js` with the name of your content script.

```json

  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["<name_of_your_content_script.js>"],
      "run_at": "document_start",
      "all_frames": true
    }
]


# Option 2

<Warning>Option 2 hasn't been tested and it could potentially disable your extension. We recommend using [extension-update-testing-tool](https://github.com/GoogleChromeLabs/extension-update-testing-tool) to test before sending an update to the Webstore</Warning>

Use Option 2 only if you have already published your extension on the Web Store and you have asked for permission to operate only on specific websites.
You need to add `tabs` and `declarativeNetRequestWithHostAccess` to your `optional_permissions`. Also add `https://*/*` to the `optional_host_permissions` section.
Mellowtel will automatically request these permissions if the user decides to opt in.
If it's not already there, you also need to add the `storage` permission. This can be done in the `permissions` section as it doesn't display an alert window.

```json
{
  "optional_permissions": [
    "tabs",
    "declarativeNetRequestWithHostAccess"
  ],
  "optional_host_permissions": [
    "https://*/*"
  ],
  "permissions": [
    "storage"
  ]
}
```

<Note>The chrome.permissions API works only in a click event handler. Make sure to call mellowtel.optIn() & mellowtel.start() in a click event handler. These APIs, under the hood, request the optional permissions from the user if you go with Option 2.</Note>


# Set up your background script

# Set up your content script
You have to import the `mellowtel` package in your content script as well.

```javascript
import Mellowtel from "mellowtel";
```

Again, you can use `Mellowtel(configuration_key, options?)` to create a new instance of the Mellowtel object.

```javascript
const mellowtel = new Mellowtel("<configuration_key>");
```

Initialize Mellowtel by calling the `initContentScript()` method. This method will initialize the Mellowtel object and set up the necessary listeners.

```javascript
await mellowtel.initContentScript();
```

This content script should run in `all_frames` and `<all_urls>` at the `document_start`, so you need to add the following to your `manifest.json` file:

```json
{
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["content.js"],
      "run_at": "document_start",
      "all_frames": true
    }
  ]
}
```

If, for some reason, you can't have your content script running with these settings, just create a new content script that runs with these settings and import the `mellowtel` package in it.
